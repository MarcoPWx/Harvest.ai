import { Meta } from "@storybook/addon-docs/blocks";
import InlineToc from "../components/InlineToc";
import LastUpdated from "../components/LastUpdated";

# Labs Index

<Meta title="Labs/Index" />

<div style={{ display: "flex", gap: 8, marginBottom: 12 }}>
  <a
    href="?path=/docs/labs-index--docs&globals=presenterGuide:true&presenter=labs"
    style={{
      textDecoration: "none",
      border: "1px solid #e5e7eb",
      borderRadius: 8,
      padding: "8px 12px",
      background: "#0ea5e9",
      color: "white",
      fontSize: 12,
    }}
  >
    Start Presentation
  </a>
  <span style={{ fontSize: 12, color: "#555" }}>
    Hotkey: press g then g to toggle, Esc to close
  </span>
</div>

A central index for all interactive labs in Storybook. Start here to explore the stack via runnable panels, mock-first flows, and end‑to‑end demos.

<InlineToc
  items={[
    { href: "#run", label: "How to run labs" },
    { href: "#coverage", label: "Coverage map" },
    { href: "#links", label: "Quick links" },
    { href: "#next", label: "What we added now / next gaps" },
  ]}
/>

## How to run labs {#run}

```bash
# Start app with MSW + E2E flags
npm run dev:e2e
# Start Storybook
npm run storybook
```

Tips:

- Use the Command Center → S2S panels for live JSON/SSE calls to the dev server.
- Prefer the mocked “Docs/User Journeys” page when you need deterministic flows without network flake.

## Coverage map {#coverage}

Current interactive coverage in Storybook:

- S2S
  - Command Center/S2S — Streaming & Threads (live)
  - Specs/S2S — Recipes & Flows, Gateway Reference, State & DB Semantics
  - Lab/S2S Journeys and S2S Journeys — Extended
- Journeys
  - Docs/User Journeys (mock-backed)
  - Lab/User Journeys — Extended (20 curated flows)
  - Lab/Curated Journeys (guided set)
- Technology overview
  - Labs/Technology Overview Lab (stack walkthrough w/ examples)
- Observability
  - Docs/Observability Playground (structured logs, minimal metrics)
  - Docs/Status Dashboard (reads CI JSON)
- Testing & DX
  - Docs/Testing (commands, tips)
  - Docs/Project Docs Reader (renders /docs inside SB)

Added now (new):

- Labs/AI Service Lab — fallback, caching, error classes, embeddings
- Labs/E2E Smoke Lab — reliable, deterministic smokes w/ MSW
- Labs/Auth Lab — service layer and session semantics (mock-first)
- Labs/Local Memory Lab — index & search exercises via API
- Labs/Provider Adapters Lab — PROVIDERS_ON switches, real SDK vs simulate, safety
- Labs/Security Lab — headers, CSP, COOP/COEP, hardening checklist

## Quick links {#links}

- Labs/Technology Overview Lab
- Lab/Overview, Lab/Curated Journeys, Lab/User Journeys — Extended, Lab/S2S Journeys
- Command Center/S2S — Streaming & Threads
- Docs/User Journeys
- Specs/S2S — Gateway Reference, Recipes & Flows, State & DB Semantics
- Docs/Observability Playground, Docs/Status Dashboard, Docs/Testing
- Docs/Agent Boot, Docs/Project Docs Reader

## What we added now / next gaps {#next}

Added now:

- New Labs pages (AI Service, E2E Smoke, Auth, Local Memory)

Recommended next labs to add:

- Security Lab (CSP, HSTS, permissions-policy, COOP/COEP)
- Provider Adapter Lab (OpenAI/Anthropic/Gemini adapter toggles with PROVIDERS_ON)
- Performance Lab (bundle inspect, lazy routes)

<LastUpdated file="src/stories/Labs/Index.docs.mdx" />
