import { Meta, Source } from "@storybook/addon-docs/blocks";

export const parameters = {
  repoDocPath: "/docs/status/LOCAL_DEV_GUIDE.md",
  repoDocLabel: "Local Development Guide",
};

<Meta title="Docs/Realtime" />

## Usage

<Source language="ts">
  {`
const cleanup = connectGenerationProgress({
  onEvent: (ev) => {
    if (ev.type === 'progress') setProgress(ev.value)
    if (ev.type === 'stream') setStreamText(prev => prev + ev.delta)
    if (ev.type === 'complete') setStreamText(prev => prev + '\n' + ev.content)
  }
})
`}
</Source>

### Event Types

- progress: { value: number }
- stream: { delta: string }
- complete: { content: string }
- error: { message: string }

## Notes

- In production, switch to a real WS/SSE implementation for partial updates
- For E2E, the mock progress and stream allow deterministic assertions
